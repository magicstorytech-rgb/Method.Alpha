<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alpha Method - Teste Gratuito</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ef4444; --bg: #050505; --card: #111111; --text: #ffffff; --green: #22c55e; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: var(--text); min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; }
        
        .container { width: 100%; max-width: 500px; }
        
        .screen { display: none; }
        .screen.active { display: block; animation: fadeIn 0.3s; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .card { background: var(--card); border: 1px solid #262626; border-radius: 20px; padding: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.6); }
        
        .badge { display: inline-block; background: rgba(239, 68, 68, 0.15); border: 1px solid var(--primary); color: var(--primary); padding: 8px 16px; border-radius: 20px; font-size: 11px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 20px; }
        
        .headline { font-size: 26px; font-weight: 900; color: #fff; margin-bottom: 15px; line-height: 1.2; }
        
        .subheadline { font-size: 15px; color: #999; margin-bottom: 25px; line-height: 1.4; }
        
        .stats-row { display: flex; gap: 10px; margin-bottom: 25px; }
        .stat-box { flex: 1; background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); padding: 12px; border-radius: 10px; text-align: center; }
        .stat-number { font-size: 18px; font-weight: 900; color: var(--green); }
        .stat-label { font-size: 10px; color: #999; text-transform: uppercase; margin-top: 4px; }
        
        .urgency-box { background: rgba(239, 68, 68, 0.15); border: 1px solid var(--primary); padding: 12px; border-radius: 10px; text-align: center; margin-bottom: 20px; font-size: 13px; font-weight: 700; color: var(--primary); }
        
        .btn { background: var(--primary); color: white; border: none; padding: 20px; border-radius: 14px; font-weight: 900; cursor: pointer; width: 100%; font-size: 18px; text-transform: uppercase; transition: all 0.3s; box-shadow: 0 10px 20px rgba(239, 68, 68, 0.3); }
        .btn:hover { transform: scale(1.02); }
        
        .progress-bar-container { margin-bottom: 25px; }
        .progress-text { font-size: 12px; font-weight: 900; color: var(--primary); margin-bottom: 8px; text-align: right; }
        .progress-bar { height: 6px; background: #262626; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s ease; }
        
        .question { font-size: 20px; font-weight: 900; margin-bottom: 20px; line-height: 1.3; }
        
        .privacy-note { background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); padding: 12px; border-radius: 10px; margin-bottom: 20px; font-size: 12px; text-align: center; color: var(--green); font-weight: 700; }
        
        .options { display: grid; gap: 12px; }
        .option-btn { background: rgba(255, 255, 255, 0.05); border: 2px solid #262626; color: var(--text); padding: 18px; border-radius: 12px; cursor: pointer; font-weight: 700; transition: all 0.2s; font-size: 16px; text-align: left; }
        .option-btn:hover { border-color: var(--primary); background: rgba(239, 68, 68, 0.1); transform: translateX(5px); }
        
        .analysis-bar { margin-bottom: 15px; }
        .analysis-label { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px; font-weight: 700; }
        .bar-container { height: 10px; background: #222; border-radius: 5px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.5s ease; }
        .bar-fill.complete { background: var(--green); }
        
        .testimonial-box { background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 12px; padding: 15px; margin: 20px 0; }
        .testimonial-title { font-size: 12px; font-weight: 900; color: var(--green); text-transform: uppercase; margin-bottom: 10px; }
        
        .video-container { position: relative; background: #000; border-radius: 16px; overflow: hidden; margin-bottom: 20px; border: 1px solid #262626; }
        
        .result-box { background: linear-gradient(135deg, rgba(34, 197, 94, 0.2) 0%, rgba(34, 197, 94, 0.05) 100%); border: 2px solid var(--green); padding: 25px; border-radius: 16px; margin: 25px 0; text-align: center; animation: pulse 2s infinite; }
        
        @keyframes pulse { 0%, 100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.3); } 50% { box-shadow: 0 0 40px rgba(34, 197, 94, 0.6); } }
        
        .result-number { font-size: 56px; font-weight: 900; color: var(--green); margin: 15px 0; text-shadow: 0 0 30px rgba(34, 197, 94, 0.6); }
        
        .result-label { font-size: 14px; color: #ccc; text-transform: uppercase; font-weight: 700; }
        
        .benefit { display: flex; align-items: center; margin-bottom: 15px; font-size: 16px; font-weight: 800; }
        .benefit span { color: var(--green); margin-right: 12px; font-size: 20px; }
        
        .price-box { background: rgba(239, 68, 68, 0.1); border: 2px solid var(--primary); padding: 25px; border-radius: 16px; margin: 25px 0; text-align: center; }
        .old-price { font-size: 18px; color: #999; text-decoration: line-through; }
        .new-price { font-size: 48px; font-weight: 900; color: var(--green); margin: 10px 0; }
        .economy { font-size: 14px; color: var(--green); font-weight: 700; margin-top: 5px; }
        .comparison { font-size: 13px; color: #999; margin-top: 10px; }
        
        .guarantee { background: rgba(34, 197, 94, 0.15); border: 1px solid var(--green); padding: 15px; border-radius: 12px; text-align: center; margin: 20px 0; font-weight: 700; color: var(--green); }
        
        .social-proof { background: rgba(255, 255, 255, 0.03); padding: 15px; border-radius: 12px; margin: 20px 0; font-size: 13px; line-height: 1.6; }
        
        .testimonials-carousel { position: relative; height: 60px; overflow: hidden; margin: 20px 0; }
        .testimonial-slide { position: absolute; width: 100%; text-align: center; opacity: 0; transition: opacity 0.8s ease; padding: 12px; background: rgba(255, 255, 255, 0.03); border-radius: 12px; }
        .testimonial-slide.active { opacity: 1; }
        .testimonial-quote { font-size: 14px; font-weight: 700; color: #fff; margin-bottom: 6px; }
        .testimonial-author { font-size: 12px; color: #999; }
        
        .security-footer { font-size: 11px; margin-top: 15px; color: #999; font-weight: 700; text-align: center; }
    </style>
</head>
<body>
    <div class="container">
        <!-- TELA 1: GANCHO DIRETO (SEM VSL) -->
        <div id="screen-1" class="screen active">
            <div class="card">
                <div class="badge" style="display: block; text-align: center;">‚ö° M√âTODO VALIDADO POR +50 MIL HOMENS</div>
                
                <h1 class="headline" style="text-align: center;">Descubra Quantos CM Voc√™ Pode Aumentar em 30 Dias</h1>
                
                <p class="subheadline" style="text-align: center;">Teste r√°pido baseado em ci√™ncia. 100% confidencial.</p>
                
                <div class="stats-row">
                    <div class="stat-box">
                        <div class="stat-number">50K+</div>
                        <div class="stat-label">Testaram</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">4.9‚òÖ</div>
                        <div class="stat-label">Avalia√ß√£o</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">R$ 12,90</div>
                        <div class="stat-label">S√≥ Hoje</div>
                    </div>
                </div>
                
                <div class="privacy-note">
                    üîí TOTALMENTE CONFIDENCIAL - Suas respostas s√£o 100% an√¥nimas
                </div>
                
                <div class="urgency-box">
                    üî• 1.247 homens fizeram este teste nas √∫ltimas 24 horas
                </div>
                
                <button class="btn" onclick="startQuiz()">‚ö° DESCOBRIR MEU POTENCIAL AGORA</button>
            </div>
        </div>

        <!-- TELA 2: QUIZ (8 PERGUNTAS) -->
        <div id="screen-2" class="screen">
            <div class="card">
                <div class="badge">üîí 100% CONFIDENCIAL</div>
                
                <div class="progress-bar-container">
                    <div class="progress-text" id="progress-text">13% COMPLETO</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>
                
                <div id="quiz-content"></div>
            </div>
        </div>

        <!-- TELA 3: AN√ÅLISE COM DEPOIMENTO (1:47) -->
        <div id="screen-3" class="screen">
            <div class="card">
                <div class="badge">üî¨ Processando seus dados</div>
                
                <h2 class="headline">Analisando Seu Perfil...</h2>
                
                <div class="analysis-bar">
                    <div class="analysis-label">
                        <span>Fluxo Sangu√≠neo Cavernoso</span>
                        <span id="status-1">‚è≥</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-fill" id="bar-1"></div>
                    </div>
                </div>
                
                <div class="analysis-bar">
                    <div class="analysis-label">
                        <span>Densidade Tecidual</span>
                        <span id="status-2">‚è≥</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-fill" id="bar-2"></div>
                    </div>
                </div>
                
                <div class="analysis-bar">
                    <div class="analysis-label">
                        <span>Compatibilidade Protocolo</span>
                        <span id="status-3">‚è≥</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-fill" id="bar-3"></div>
                    </div>
                </div>
                
                <div class="testimonial-box">
                    <div class="testimonial-title">üìπ "J√° consegui aumentar mais de 3cm com esse m√©todo" - Luan, 23 anos</div>
                    <div class="video-container">
                        <script src="https://fast.wistia.com/player.js" async></script>
                        <script src="https://fast.wistia.com/embed/0bj892x3m1.js" async type="module"></script>
                        <wistia-player id="testimonial_vid" media-id="0bj892x3m1" aspect="1.0" auto-play="true"></wistia-player>
                    </div>
                </div>
                
                <div id="result-container" style="display:none;">
                    <div class="result-box">
                        <div class="result-label">üéâ SEU POTENCIAL DE CRESCIMENTO:</div>
                        <div class="result-number" id="growth-result">4-6cm</div>
                        <div class="result-label">Em at√© 30 dias com o m√©todo</div>
                    </div>
                    
                    <p style="text-align: center; color: #ccc; font-size: 14px; margin-bottom: 20px;">
                        Baseado no seu perfil, voc√™ tem um <strong style="color: var(--green);">potencial ALTO</strong>. O m√©todo Alpha foi feito exatamente para o seu caso!
                    </p>
                    
                    <button class="btn" onclick="goToOffer()">üöÄ QUERO ALCAN√áAR ESSE RESULTADO</button>
                </div>
            </div>
        </div>

        <!-- TELA 4: OFERTA -->
        <div id="screen-4" class="screen">
            <div class="card">
                <div class="badge" style="display: block; text-align: center;">üî• ACESSO LIBERADO</div>
                
                <h1 class="headline" style="text-align: center; font-size: 28px;">Transforme Seu Resultado em Realidade!</h1>
                
                <div class="price-box">
                    <div class="old-price" style="font-size: 16px;">De R$ 97,00</div>
                    <div class="new-price" style="font-size: 64px; line-height: 1;">R$ 12,90</div>
                    <div class="economy" style="font-size: 15px;">üí∞ Voc√™ economiza R$ 84,10 (87% OFF)</div>
                </div>
                
                <div style="margin: 30px 0;">
                    <div class="benefit"><span>‚úì</span> Aumento permanente 3-7cm</div>
                    <div class="benefit"><span>‚úì</span> Resultados em 30 dias</div>
                    <div class="benefit"><span>‚úì</span> Controle total da ejacula√ß√£o</div>
                    <div class="benefit"><span>‚úì</span> Sem cirurgias ou aparelhos</div>
                    <div class="benefit"><span>‚úì</span> Aplicativo Exclusivo</div>
                </div>
                
                <div class="guarantee" style="font-size: 14px; padding: 12px;">
                    üõ°Ô∏è GARANTIA INCONDICIONAL DE 30 DIAS
                </div>
                
                <button class="btn" onclick="checkout()" style="font-size: 19px; padding: 22px;">üí≥ GARANTIR ACESSO POR R$ 12,90</button>
                
                <div class="testimonials-carousel" id="testimonials">
                    <div class="testimonial-slide active">
                        <div class="testimonial-quote">üí¨ "Aumentei 3cm em 6 semanas. Melhor investimento!"</div>
                        <div class="testimonial-author">@marcos_sp, 27 anos</div>
                    </div>
                    <div class="testimonial-slide">
                        <div class="testimonial-quote">üí¨ "Minha namorada percebeu a diferen√ßa logo nas primeiras semanas üî•"</div>
                        <div class="testimonial-author">@carlos_rj, 31 anos</div>
                    </div>
                    <div class="testimonial-slide">
                        <div class="testimonial-quote">üí¨ "Tinha 13cm, hoje tenho 16cm. Mudou minha autoestima!"</div>
                        <div class="testimonial-author">@pedro_mg, 25 anos</div>
                    </div>
                    <div class="testimonial-slide">
                        <div class="testimonial-quote">üí¨ "Agora duro quanto EU quero. Controle total mesmo!"</div>
                        <div class="testimonial-author">@lucas_ba, 29 anos</div>
                    </div>
                    <div class="testimonial-slide">
                        <div class="testimonial-quote">üí¨ "Funcionou! N√£o acreditei at√© ver os resultados. Vale muito!"</div>
                        <div class="testimonial-author">@rafael_sp, 26 anos</div>
                    </div>
                </div>
                
                <div class="security-footer" style="margin-top: 12px;">
                    üîí Pagamento 100% seguro e discreto
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const app = initializeApp({
            apiKey: "AIzaSyB-GPkmK_iNQuu_96NsWBEmnZA1LhiSRR4",
            authDomain: "alytics-metodo-alpha.firebaseapp.com",
            projectId: "alytics-metodo-alpha",
            storageBucket: "alytics-metodo-alpha.firebasestorage.app",
            messagingSenderId: "389989039442",
            appId: "1:389989039442:web:e897945ffbfe52da210e8b"
        });

        const db = getFirestore(app);
        let sid = localStorage.getItem('alpha_sid');
        if (!sid) {
            sid = 's_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('alpha_sid', sid);
        }

        // QUIZ DE 8 PERGUNTAS (ESSENCIAIS)
        const QUESTIONS = [
            { 
                id: 'tamanho', 
                q: 'üìè Qual o tamanho do seu p√™nis ERETO?', 
                o: ['Menos de 10cm', 'Entre 10-13cm', 'Entre 13-16cm', 'Mais de 16cm'],
                points: [10, 8, 5, 3]
            },
            { 
                id: 'duracao', 
                q: '‚è±Ô∏è Quanto tempo voc√™ DURA na cama?', 
                o: ['Menos de 3 minutos', 'Entre 3-7 minutos', 'Entre 7-15 minutos', 'Mais de 15 minutos'],
                points: [10, 7, 4, 2]
            },
            { 
                id: 'satisfacao', 
                q: 'üòî Como voc√™ se sente com seu desempenho?', 
                o: ['Muito insatisfeito (ela reclama)', 'Insatisfeito (sei que posso melhorar)', 'Razo√°vel (funciona mas quero mais)', 'Satisfeito (mas sempre d√° pra evoluir)'],
                points: [10, 8, 6, 4]
            },
            { 
                id: 'idade', 
                q: 'üìÖ Qual sua idade?', 
                o: ['18-25 anos', '26-35 anos', '36-45 anos', '46+ anos'],
                points: [10, 8, 6, 5]
            },
            { 
                id: 'alimentacao', 
                q: 'üçé Como est√° sua alimenta√ß√£o?', 
                o: ['Muito saud√°vel', 'Razo√°vel', 'Ruim', 'P√©ssima'],
                points: [10, 7, 4, 2]
            },
            { 
                id: 'sono', 
                q: 'üò¥ Quantas horas voc√™ dorme por noite?', 
                o: ['7-9 horas (qualidade boa)', '6-7 horas (acordo cansado)', '5-6 horas (durmo pouco)', 'Menos de 5 horas'],
                points: [10, 7, 4, 2]
            },
            { 
                id: 'tentou', 
                q: 'üíä J√° tentou algo antes?', 
                o: ['Sim, n√£o funcionou', 'Sim, funcionou pouco', 'Nunca tentei nada', 'Tentei v√°rias coisas'],
                points: [7, 8, 10, 5]
            },
            { 
                id: 'prioridade', 
                q: 'üéØ Resolver isso √© sua PRIORIDADE m√°xima?', 
                o: ['Sim, urgente!', 'Sim, mas posso esperar', 'Apenas curiosidade', 'N√£o √© prioridade'],
                points: [10, 7, 4, 2]
            }
        ];

        let currentQ = 0;
        let answers = {};
        let totalPoints = 0;

        async function track(e, d = {}) { 
            try { 
                await updateDoc(doc(db, 'sessions', sid), { 
                    [`events.${e}`]: serverTimestamp(), 
                    lastActivity: serverTimestamp(), 
                    ...d 
                }); 
            } catch (err) {} 
        }

        window.startQuiz = function() {
            track('quiz_started');
            showScreen(2);
            renderQuestion();
        };

        function renderQuestion() {
            const q = QUESTIONS[currentQ];
            const progress = ((currentQ + 1) / QUESTIONS.length) * 100;
            
            document.getElementById('progress-text').innerText = `${Math.round(progress)}% COMPLETO`;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            
            document.getElementById('quiz-content').innerHTML = `
                <div class="question">${q.q}</div>
                <div class="options">
                    ${q.o.map((opt, idx) => `<button class="option-btn" onclick="selectAnswer(${idx}, '${opt.replace(/'/g, "\\'")}')">${opt}</button>`).join('')}
                </div>
            `;
        }

        window.selectAnswer = function(optionIndex, answer) {
            const q = QUESTIONS[currentQ];
            answers[q.id] = answer;
            totalPoints += q.points[optionIndex];
            
            const progress = currentQ + 1;
            
            track('quiz_answer', { 
                question: q.q,
                answer: answer,
                quizProgress: progress
            });
            
            updateDoc(doc(db, 'sessions', sid), { quizProgress: progress });
            
            currentQ++;
            
            if (currentQ < QUESTIONS.length) {
                renderQuestion();
            } else {
                track('quiz_completed', { totalScore: totalPoints });
                showScreen(3);
                startAnalysis();
            }
        };

        function calculateResults() {
            // Pontua√ß√£o m√°xima: 80 pontos
            let growth;
            
            if (totalPoints >= 65) growth = '5-7cm';
            else if (totalPoints >= 50) growth = '4-6cm';
            else if (totalPoints >= 35) growth = '3-5cm';
            else if (totalPoints >= 20) growth = '2-4cm';
            else growth = '2-3cm';
            
            return { growth };
        }

        function startAnalysis() {
            let p1 = 0, p2 = 0, p3 = 0;
            
            // Inicia v√≠deo autom√°tico
            window._wq = window._wq || [];
            _wq.push({ 
                id: "0bj892x3m1", 
                onReady: function(video) { 
                    video.play();
                    video.volume(0.7); // Volume 70%
                }
            });
            
            // AN√ÅLISE SUPER R√ÅPIDA: 8 segundos total
            const totalSteps = 8; // 8 segundos apenas!
            let step = 0;
            
            const interval = setInterval(() => {
                step++;
                
                if (step <= 3) {
                    // Primeiros 3 segundos: barra 1
                    p1 = (step / 3) * 100;
                    document.getElementById('bar-1').style.width = p1 + '%';
                    if (step === 3) {
                        document.getElementById('bar-1').classList.add('complete');
                        document.getElementById('status-1').innerText = '‚úÖ';
                        document.getElementById('status-2').innerText = 'PROCESSANDO';
                    }
                } else if (step <= 6) {
                    // 3-6 segundos: barra 2
                    p2 = ((step - 3) / 3) * 100;
                    document.getElementById('bar-2').style.width = p2 + '%';
                    if (step === 6) {
                        document.getElementById('bar-2').classList.add('complete');
                        document.getElementById('status-2').innerText = '‚úÖ';
                        document.getElementById('status-3').innerText = 'PROCESSANDO';
                    }
                } else if (step <= 8) {
                    // 6-8 segundos: barra 3
                    p3 = ((step - 6) / 2) * 100;
                    document.getElementById('bar-3').style.width = p3 + '%';
                    if (step === 8) {
                        document.getElementById('bar-3').classList.add('complete');
                        document.getElementById('status-3').innerText = '‚úÖ';
                        
                        clearInterval(interval);
                        
                        // Mostra resultado ap√≥s 8 segundos
                        setTimeout(() => {
                            const results = calculateResults();
                            document.getElementById('growth-result').innerText = results.growth;
                            document.getElementById('result-container').style.display = 'block';
                            track('result_shown', { growthPotential: results.growth, score: totalPoints });
                        }, 300);
                    }
                }
            }, 1000);
        }

        window.goToOffer = function() {
            track('offer_viewed');
            showScreen(4);
            
            // Inicia carrossel de depoimentos
            startTestimonialsCarousel();
        };

        function startTestimonialsCarousel() {
            const slides = document.querySelectorAll('.testimonial-slide');
            let currentSlide = 0;
            
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 4000); // Troca a cada 4 segundos
        }

        window.checkout = function() {
            track('checkout');
            window.location.href = `https://pay.wiapy.com/elbyXqblP2?utm_source=${sid}&external_id=${sid}`;
        };

        function showScreen(num) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(`screen-${num}`).classList.add('active');
            window.scrollTo(0, 0);
        }

        async function init() {
            try {
                await setDoc(doc(db, 'sessions', sid), {
                    sessionId: sid,
                    enteredAt: serverTimestamp(),
                    lastActivity: serverTimestamp(),
                    currentStep: 'hook',
                    status: 'active',
                    source: 'tiktok_optimized',
                    quizProgress: 0,
                    events: {},
                    answers: {},
                    conversion: { clickedCheckout: false }
                });
            } catch (err) {}
        }

        init();
    </script>
</body>
</html>
